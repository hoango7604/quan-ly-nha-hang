<p-toast [style]="{marginTop: '50px'}"></p-toast>
<p-toolbar styleClass="ggm-ui-toolbar sticky">
	<button pButton type="button" label="Back" icon="ui-icon-arrow-back" [routerLink]="['/events/list']" routerLinkActive="router-link-active" class="ui-button-raised ui-button-secondary"></button>
	<button pButton label="Create" icon="ui-icon-save" (click)="createEvent()" [style]="{'margin-left': '15px'}" class="ui-button-raised"></button>
	<p-checkbox [(ngModel)]="shouldCreateAnother" binary="true" label="Create another" [style]="{'margin-left': '15px'}"></p-checkbox>
</p-toolbar>
<p-panel header="Create Event" styleClass="ui-panel-shadow">
	<div class="ui-g ui-fluid" >
		<form [formGroup]="eventForm" (ngSubmit)="createEvent()">
			<div class="ui-g-12">
			<div class="ggm-ui-g-1 ui-g-1">
				<label for="name">Name</label>
			</div>
			<div class="ggm-ui-g-3 ui-g-3">
				<input #firstfield pInputText formControlName="eventName"/>
			</div>
			<div class="ggm-ui-g-6 ui-g-6">
				<p-message severity="error" text="Empty event name"
				*ngIf="eventForm.errors?.emptyName">
				</p-message>
				<!-- <p-message severity="error" text="Name too short"
				*ngIf="eventForm.errors?.shortName">
				</p-message>
				<p-message severity="error" text="Name too long"
				*ngIf="eventForm.errors?.longName">
				</p-message> -->
			</div>
			</div>
			<div class="ui-g-12">
				<div class="ggm-ui-g-1 ui-g-1">
					<label for="place">Location</label>
				</div>
				<div class="ggm-ui-g-3 ui-g-3">
					<textarea pInputTextArea formControlName="place" [rows]="4" [cols]="22" autoResize="autoResize"></textarea>
				</div>
				<div class="ggm-ui-g-6 ui-g-6">
					<p-message severity="error" text="Empty location"
					*ngIf="eventForm.errors?.emptyPlace">
					</p-message>
				</div>
			</div>
			<div class="ui-g-12">
				<div class="ggm-ui-g-1 ui-g-1">
					<label for="startTime">Start time</label>
				</div>
				<span>
					<div class="ui-g-2">
						<p-calendar formControlName="startTime" [showTime]="true" dateFormat="dd/mm/yy"></p-calendar>
					</div>
					<div class="ggm-ui-g-6 ui-g-6">
						<p-message severity="error" text="Empty start time"
						*ngIf="eventForm.errors?.emptyStartTime">
						</p-message>
						<p-message severity="error" text="Invalid start time"
						*ngIf="eventForm.errors?.invalidStartTime">
						</p-message>
					</div>
				</span>
			</div>
			<div class="ui-g-12">
				<div class="ggm-ui-g-1 ui-g-1">
					<label for="endTime">End time</label>
				</div>
				<div class="ui-g-2">
					<p-calendar formControlName="endTime" [showTime]="true" dateFormat="dd/mm/yy"></p-calendar>
				</div>
				<div class="ggm-ui-g-6 ui-g-6">
					<p-message severity="error" text="Empty end time"
					*ngIf="eventForm.errors?.emptyEndTime">
					</p-message>
					<p-message severity="error" text="Invalid end time"
					*ngIf="eventForm.errors?.invalidEndTime">
					</p-message>
				</div>
			</div>
			<div class="ui-g-12">
				<div class="ggm-ui-g-1 ui-g-1">
					<label for="state">State </label>
				</div>
				<div class="ggm-ui-g-3 ui-g-3">
					<p-dropdown formControlName="eventState" filter="true" filterBy="label" [options]="stateItems" placeholder="Select a state"></p-dropdown>
				</div>
				<div class="ggm-ui-g-6 ui-g-6">
					<p-message severity="error" text="Event state is required"
						*ngIf="!eventForm.controls['eventState'].valid && eventForm.controls['eventState'].dirty">
					</p-message>
				</div>
			</div>
			<div class="ui-g-12">
				<div class="ggm-ui-g-1 ui-g-1">
					<label for="requireCheckout">Require checkout</label>
				</div>
				<div class="ggm-ui-g-3 ui-g-3">
					<!-- <p-checkbox name="requireCheckout" value="requireCheckout" label="" [(ngModel)]="requireCheckout" inputId="requireCheckout"></p-checkbox> -->
					<input type="checkbox" formControlName="requireCheckout">
				</div>
			</div>
			<div class="ui-g-12">
				<div class="ggm-ui-g-1 ui-g-1">
					<label for="useKiosk">Use kiosk</label>
				</div>
				<div class="ggm-ui-g-3 ui-g-3">
					<!-- <p-checkbox name="useKiosk" value="useKiosk" label="" [(ngModel)]="useKiosk" inputId="useKiosk"></p-checkbox> -->
					<input type="checkbox" formControlName="useKiosk">
				</div>
			</div>
			<button type="submit" style="display: none"></button>
		</form>
	</div>
</p-panel>